M.define("thread",function(a){var b=function(c){this.init(c)};M.object.merge(b.prototype,{init:function(e){this.eventState=this.eventState||{};this.eventList=[];this.closeList=[];this.openList=[];this.time=1000;if(M.object.isObject(e)){if(e.time&&M.object.isNumber(e.time)){this.time=e.time}this.isStart=false;if(e.eventList&&M.object.isArray(e.eventList)){this.eventList=e.eventList}if(this.eventList.length>0){for(var c=0;c<this.eventList.length;c++){if(this.eventList[c].name){this.eventState[this.eventList[c].name]=true}else{throw new Error("one eventName is null")}}}}},call:function(){var e=this;if(e.eventList.length>0){for(var c=0;c<e.eventList.length;c++){if(e.eventList[c]&&e.eventList[c].event){if(e.eventState[e.eventList[c].name]){e.runFunction(e.eventList[c]);e.runObject(e.eventList[c])}}}for(var c=0;c<e.closeList.length;c++){e.eventState[e.closeList[c]]=false}for(var c=0;c<e.openList.length;c++){e.eventState[e.openList[c]]=true}e.openList=[];e.closeList=[]}if(!e.stopThread){e.threadId=setTimeout(function(){e.isStart=true;e.call()},e.time)}},runFunction:function(f){var e=this;if(M.object.isFunction(f.event)){var c=null;if(f.source){c=f.source}if(f.name){e.eventState[f.name]=true}f.event.call(c,e.time)}},runObject:function(f){var e=this;if(M.object.isObject(f.event)){var c=null;if(f.source){c=f.source}if(M.object.isObject(f.event)&&M.object.isFunction(f.event.go)){f.event.go.call(c,e.time)}}},start:function(){var c=this;if(!c.isStart){c.threadId=setTimeout(function(){c.isStart=true;c.call()},c.time)}},openOne:function(c,f){var g=this;if(!M.object.isDefined(g.eventState[c])&&!g.eventState[c]){if(!f){g.eventState[c]=true}else{if(g.getOpenListIndex(c)==-1){g.openList.push(c);var e=g.getOpenListIndex(c);if(e>0){g.openList.splice(e,1)}}}}},closeOne:function(c,f){var g=this;if(!M.object.isDefined(g.eventState[c])&&g.eventState[c]){if(!f){g.eventState[c]=false}else{if(g.getCloseListIndex(c)!=-1){g.closeList.push(c);var e=g.getCloseListIndex(c);if(e>0){g.closeList.splice(e,1)}}}}},addOne:function(e,c){var f=this;if(M.object.isObject(e)){if(M.object.isObject(e)&&e.name){if(!c){f.eventState[e.name]=true}else{f.eventState[e.name]=false;f.openList.push(e.name)}f.eventList.push(e)}}},getCloseListIndex:function(e){var g=this;var c=-1;for(var f=0;f<g.closeList.length;f++){if(g.closeList[f]==e){c=f;break}}return c},getOpenListIndex:function(e){var g=this;var c=-1;for(var f=0;f<g.openList.length;f++){if(g.openList[f]==e){c=f;break}}return c},stop:function(){var c=this;if(!c.isStart){clearTimeout(c.threadId);c.stopThread=true}}});a.clazz=b});M.define("remoteStorage",function(b){var a=function(c,e){this.init(c,e)};M.object.merge(a.prototype,{init:function(c,f){this.op={WRITE:"W",READ:"R",DEL:"D",CLEAR:"X"};this.origin=c;this.path=f;this._iframe=null;this._iframeReady=false;this._queue=[];this._requests={};this._id=0;if(!this._iframe){var e=this;if(window.postMessage&&window.JSON&&window.localStorage){this._iframe=document.createElement("iframe");this._iframe.style.cssText="position:absolute;width:1px;height:1px;left:-9999px;";this._iframe.src=this.origin+this.path;document.body.appendChild(this._iframe);if(window.addEventListener){this._iframe.addEventListener("load",function(){e._iframeLoaded()},false);window.addEventListener("message",function(g){e._handleMessage(g)},false)}else{if(this._iframe.attachEvent){this._iframe.attachEvent("onload",function(){e._iframeLoaded()},false);window.attachEvent("onmessage",function(g){e._handleMessage(g)})}}}else{throw new Error("Unsupported browser.")}}},get:function(c,g){var e=this;var f=null;e._toSend({op:e.op.READ,key:c},g);return f},set:function(c,f,g){var e=this;e._toSend({key:c,op:e.op.WRITE,value:f},g)},remove:function(c,f){var e=this;e._toSend({key:c,op:e.op.DEL},f)},removeAll:function(e){var c=this;c._toSend({op:c.op.CLEAR},e)},_toSend:function(f,g){var e=this;var c={request:{key:f.key,id:++this._id,op:f.op,value:f.value},callback:g};if(e._iframeReady){e._sendRequest(c)}else{e._queue.push(c)}if(!e._iframe){e.init()}},_sendRequest:function(e){var c=this;c._requests[e.request.id]=e;c._iframe.contentWindow.postMessage(JSON.stringify(e.request),c.origin)},_iframeLoaded:function(){var f=this;f._iframeReady=true;if(f._queue.length){for(var e=0,c=this._queue.length;e<c;e++){f._sendRequest(f._queue[e])}f._queue=[]}},_handleMessage:function(c){var f=this;var e=JSON.parse(c.data);f._requests[e.id].callback&&f._requests[e.id].callback(e.key,e.value);delete f._requests[e.id]}});b.clazz=a});M.define("searchland",function(a){var b=function(c){this.init(c)};M.object.merge(b.prototype,{init:function(k){var f="searchland";this.formId=k.formId?k.formId:"";this.submitId=k.submitId?k.submitId:"";this.catelogyListId=k.catelogyListId?k.catelogyListId:"";this.isHome=k.isHome?k.isHome:false;this.renderId=k.renderId?k.renderId:"";this.closeSearchLandBtnId=k.closeSearchLandBtnId?k.closeSearchLandBtnId:"";this.claerKeywordBtnId=k.claerKeywordBtnId?k.claerKeywordBtnId:"";this.keywordId=k.keywordId?k.keywordId:"";this.searchPanelId=k.searchPanelId?k.searchPanelId:"";this.keyword=k.keyword?k.keyword:"";this.keywordIsObj=false;this.isSo=false;if(M.object.isObject(this.keyword)){this.keywordIsObj=true}else{this.keyword=M.string.decodeHtml(this.keyword)}this.searchHistoryLocalStorageName="searchhistory";this.searchHistoryId=M.genId(f);this.hotSearchId=M.genId(f);this.hotSearchBtn=M.genId(f);this.clearHistoryId=M.genId(f);this.hotKeyWordId=M.genId(f);this.isHome=k.isHome?k.isHome:false;this.localstorage=null;this.searchHistoryListIdList=[];this.hotKeyWordBtnIds=[];this.searchliIdList=[];this.searchliTagIdList=[];this.searchHistoryList=null;this.hotKeywordIndex=0;this.searchLoop=false;this.openSearchLoad=false;this.isHistoryPanel=false;this.showFuncObj=k.showFuncObj?k.showFuncObj:null;this.hideFuncObj=k.hideFuncObj?k.hideFuncObj:null;if(window.location.href.indexOf("//so.m.jd.com")>0){this.isSo=true;this.localstorage=M.localstorage}else{var h=true;if(h){try{window.localStorage.setItem("M_test",1)}catch(i){h=false;M.log("localStorage无法set","error")}try{window.localStorage.getItem("M_test")}catch(i){h=false;M.log("localStorage无法get","error")}try{window.localStorage.removeItem("M_test")}catch(i){h=false;M.log("localStorage无法remove","error")}}var c="so.m.jd.com";if(window.location.href.indexOf("https://")>=0){c="https://"+c}else{c="http://"+c}if(h){this.isSo=false;this.localstorage=new (M.exports("remoteStorage").clazz)(c,"/solocalocalstorage.html")}else{this.isSo=true;this.localstorage=M.localstorage}}if(this.keywordIsObj){var j=this.keyword.showWord?this.keyword.showWord:"";if(this.keyword.keyword){if(this.keyword.keyword!=this.keyword.realWord){var g=M.string.decodeHtml(this.keyword.keyword);$("#"+this.keywordId).val(g)}else{$("#"+this.keywordId).val("")}}else{$("#"+this.keywordId).val("")}$("#"+this.keywordId).attr("placeholder",j)}else{$("#"+this.keywordId).val(this.keyword)}$("#"+this.keywordId).addClass("hilight1")},mainHtml:function(){var e=this;var c=[];c.push('<div id="search_land_searchland" class="search-land">');c.push("</div>");return c.join("")},loadHotKeyword:function(){var c=this;if(!c.hotKeyword){M.http.ajax({url:"//so.m.jd.com/ware/hotKeyWord.action?_format_=json",success:function(g){if(g&&g.hotKeyWord){var k=g.hotKeyWord;try{k=JSON.parse(k);var j=k.def?k.def:[];var f=k.owner?k.owner:[];if(j.length>0){c.hotKeyword=j;if(f.length>0){for(var h=0;h<f.length;h++){if(f[h].hotWord&&f[h].num&&f[h].num<=j.length){if(M.object.isString(f[h].hotWord)){c.hotKeyword[f[h].num-1]=f[h].hotWord}}}}}else{c.hotKeyword=[];if(f.length>0){for(var h=0;h<f.length;h++){c.hotKeyword.push(f[h].hotWord)}}}}catch(l){c.hotKeyword=[]}}else{c.hotKeyword=[]}c.searchHotKeyHtml()},error:function(){c.hotKeyword=[];c.searchHotKeyHtml()}})}else{c.searchHotKeyHtml()}},searchHotKeyHtml:function(){var f=this;var e=[];if(f.hotKeyword&&f.hotKeyword.length>0){f.hotKeyWordBtnIds=[];e.push('<div id="'+f.hotSearchId+'" class="hot-search">');e.push('<div class="hot-search-head cf">');e.push("<p>热门搜索</p>");e.push('<i class="around-pic" id="'+f.hotSearchBtn+'"></i>');e.push("</div>");e.push('<div id="'+f.hotKeyWordId+'" class="hot-search-tags">');for(var c=0;c<6&&c<f.hotKeyword.length;c++){var g="searchland_hotKeywordList_"+c;f.hotKeyWordBtnIds.push(g);f.hotKeywordIndex=c;e.push("<span>");e.push('<a href="javascript:void(0);" id="'+g+'"><i>'+f.hotKeyword[c]+"</i></a>");e.push("</span>")}}e.push("</div>");e.push("</div>");$("#search_land_searchland").append(e.join(""));f.searchHotKeyBind()},searchHotKeyBind:function(){var e=this;if(e.hotKeyWordBtnIds.length>0){for(var c=0;c<e.hotKeyWordBtnIds.length;c++){$("#"+e.hotKeyWordBtnIds[c]).on("click",function(){var f=$.trim($(this).text());if(f!=""){e.searchLandSubmit(f,"MSearch_HotWords")}})}$("#"+e.hotSearchBtn).on("click",function(){var g=0;var k=[];for(var h=e.hotKeywordIndex+1,f=h+6;h<f&&h<e.hotKeyword.length;h++){g++;e.hotKeywordIndex=h;k.push(e.hotKeyword[h])}if(g<6){for(var h=0,f=6-g;h<f&&h<e.hotKeyword.length;h++){g++;e.hotKeywordIndex=h;k.push(e.hotKeyword[h])}}$(this).addClass("turn-around");e.sendMping("MSearch_ChangeKeyWords");setTimeout(function(){$("#"+e.hotSearchBtn).removeClass("turn-around")},800);var l=$("#"+e.hotKeyWordId).find("a");e.searchLandHotKeywordRecursiveFade(l,k,0,g)})}},searchLandHotKeywordRecursiveFade:function(c,h,e,g){var j=this;if(e<g){for(var f=e;f<g;f++){if(f<=2){$(c[f]).find("i").addClass("move1")}else{$(c[f]).find("i").addClass("move2")}}setTimeout(function(){for(var k=e;k<g;k++){if(k<=2){$(c[k]).find("i").text(h[k])}}},310);setTimeout(function(){for(var k=e;k<g;k++){if(k<=2){$(c[k]).find("i").removeClass("move1")}}},500);setTimeout(function(){for(var k=e;k<g;k++){if(k>2){$(c[k]).find("i").text(h[k])}}},410);setTimeout(function(){for(var k=e;k<g;k++){if(k>2){$(c[k]).find("i").text(h[k]);$(c[k]).find("i").removeClass("move2")}}},750)}},searchHistoryHtml:function(g){var h=this;var f=[];try{h.searchHistoryList=JSON.parse(g)}catch(j){h.searchHistoryList=null;h.localstorage.remove(h.searchHistoryLocalStorageName)}if(h.searchHistoryList!=null&&!M.object.isArray(h.searchHistoryList)){h.searchHistoryList=null;h.localstorage.remove(h.searchHistoryLocalStorageName)}if(h.searchHistoryList&&h.searchHistoryList.length>0){f.push('<div id="'+h.searchHistoryId+'" class="recent-search">');f.push('<div class="recent-search-head cf">');f.push("<p>最近搜索</p>");f.push('<i id="'+h.clearHistoryId+'" class="garbage-pic"></i>');f.push("</div>");f.push('<div class="recent-search-tags">');h.searchHistoryListIdList=[];for(var c=0;c<h.searchHistoryList.length;c++){var k="searchland_searchHistoryList_"+c;h.searchHistoryListIdList.push(k);f.push("<span>");f.push('<a id="'+k+'" searchland_index="'+c+'" href="javascript:void(0);">'+h.searchHistoryList[c].text+"</a>");f.push("</span>")}f.push("</div>");f.push("</div>")}$("#search_land_searchland").html(f.join(""));h.searchHistoryBind();h.loadHotKeyword()},searchHistoryBind:function(){var e=this;if(e.searchHistoryListIdList&&e.searchHistoryListIdList.length>0){for(var c=0;c<e.searchHistoryListIdList.length;c++){$("#"+e.searchHistoryListIdList[c]).on("click",function(){var f=$(this).attr("searchland_index");var g=e.searchHistoryList[f];e.searchLandSubmit(g,"MSearch_HistoryRecords")})}$("#"+e.clearHistoryId).on("click",function(){if(confirm("确定要清空吗?")){e.sendMping("MSearch_ClearHistory");e.clearHistory();$("#"+e.controlId).html("");$("#"+e.clearHistoryId).parent().parent().attr("style","display:none;")}})}},searchLoadControl:function(){var e=this;var c=$("#"+e.keywordId).val().trim();if(c==""&&e.searchLoop){$("#"+e.claerKeywordBtnId).attr("style","display:none;");if(!e.isHistoryPanel){e.searchHistoryFromStorage(e.searchHistoryHtml);e.isHistoryPanel=true}}else{if(c!=""&&e.oldkeyword!=c&&e.searchLoop){$("#"+e.claerKeywordBtnId).attr("style","");e.searchKeyLoad(c)}}setTimeout(function(){e.searchLoadControl()},500)},searchKeyLoad:function(c){var e=this;e.searchLoop=false;e.oldkeyword=c;e.searchLocalStorage=false;M.http.ajax({url:"//so.m.jd.com/ware/searchSuggestion.action",data:{keyword:c,_format_:"json"},success:function(g){if(g&&g.searchTipList&&e.openSearchLoad){var f=JSON.parse(g.searchTipList);if(f.length>0){e.tipArray=f;$("#search_land_searchland").html(e.serchKeyHtml(e.tipArray));e.serchKeyBind()}e.searchLoop=true;e.isHistoryPanel=false}else{if(e.openSearchLoad){e.searchLoop=true;e.isHistoryPanel=false}}},error:function(f){if(e.openSearchLoad){e.searchLoop=true;e.isHistoryPanel=false}}})},serchKeyHtml:function(n){var c=this;c.searchliIdList=[];var f=[];if(n&&n.length>0){f.push('<ul class="association-normal">');for(var k=0;k<n.length;k++){var e="searchland_li_"+k;c.searchliIdList.push(e);var m=n[k].text;f.push('<li searchland_index="'+k+'" id="'+e+'">');f.push('<a href="javascript:void(0);">');var l="association-product-name";if(n[k].otherAttr){if(n[k].otherAttr.isSearchShop){f.push('<i class="shop-pic"></i>');l="association-shop-name"}}f.push('<span class="'+l+'">'+m+"</span>");if(n[k].otherAttr&&n[k].otherAttr.tag&&n[k].otherAttr.tag.length>0){for(var h=0;h<n[k].otherAttr.tag.length&&h<3;h++){if(n[k].otherAttr.tag[h].tagsearchquery&&n[k].otherAttr.tag[h].tagshowquery){var g=M.genId("searchland_li_tag");c.searchliTagIdList.push(g);f.push('<span pingparam="'+(h+1)+'" id="'+g+'" tagsearchquery="'+n[k].otherAttr.tag[h].tagsearchquery+'" class="association-product-btn">'+n[k].otherAttr.tag[h].tagshowquery+"</span>")}}}f.push("</a>");f.push("</li>")}f.push("</ul>")}return f.join("")},serchKeyBind:function(e){var f=this;if(f.searchliIdList.length>0){for(var c=0;c<f.searchliIdList.length;c++){$("#"+f.searchliIdList[c]).on("click",function(j){var h=$(this).attr("searchland_index");var i=f.tipArray[h];f.searchLandSubmit(i,"MSearch_SearchDropDownAssociationalWords")})}}if(f.searchliTagIdList.length>0){while(f.searchliTagIdList.length>0){var g=f.searchliTagIdList.pop();$("#"+g).on("click",function(j){var i=$(this).attr("tagsearchquery");var h=$(this).attr("pingparam");f.sendMping("MSearch_AssociationLabel",{event_param:h,event_level:"2"});f.searchLandSubmit(i);j.stopPropagation()})}}},sendMping:function(g,c){if(g){try{var h=new MPing.inputs.Click(g);if(c){h=M.object.merge(h,c)}var f=new MPing();f.send(h)}catch(i){}}},clearHistory:function(){var c=this;c.localstorage.remove(c.searchHistoryLocalStorageName)},searchHistoryFromStorage:function(f){var g=this;if(g.isSo){var c=g.localstorage.get(g.searchHistoryLocalStorageName);f.call(g,c)}else{try{g.localstorage.get(g.searchHistoryLocalStorageName,function(i,e){f.call(g,e)})}catch(h){f.call(g,null)}}},searchLandSubmit:function(c,e){var g=this;var f=null;var h=null;if(M.object.isObject(c)){h=c;f=JSON.parse(h.value)}else{h={};f={};if(g.keywordIsObj&&c==g.keyword.showWord){h.text=g.keyword.showWord;f.keyword=g.keyword.realWord;h.value=JSON.stringify(f);h.text=c}else{f.keyword=c;h.value=JSON.stringify(f);h.text=c}}if(f.keyword){g.sendMping(e,{event_param:f.keyword});$("#"+g.keywordId).val(f.keyword);f.catelogyList&&$("#"+g.catelogyListId).val(JSON.stringify(f.catelogyList));g.searchLandAddHistory(h,function(){var i=this;if(h.otherAttr&&h.otherAttr.isSearchShop){$("#"+i.formId).attr("action","//so.m.jd.com/shop/searchShop.action")}else{$("#"+i.formId).attr("action","//so.m.jd.com/ware/search.action")}$("#"+i.formId).submit();i.searchLoop=false})}},searchLandAddHistory:function(f,c){var e=this;e.searchHistoryFromStorage(function(j){var k=this;try{j=JSON.parse(j)}catch(l){j=null;try{k.localstorage.remove(k.searchHistoryLocalStorageName)}catch(l){}}if(!M.object.isArray(j)){j=null;k.localstorage.remove(k.searchHistoryLocalStorageName)}f.text=k.makeSearchName(f.text);delete f.tipNumber;if(j&&j.length>0){var g=[f];for(var h=0;h<j.length;h++){if(g.length==18){break}if(j[h].text!=f.text){g.push(j[h])}}j=g}else{j=[];j.push(f)}k.localstorage.set(k.searchHistoryLocalStorageName,JSON.stringify(j));c.call(k)})},makeSearchName:function(c){if(c.length>=30){c=c.substring(0,30)}return c},searchTransformation:function(){var g=this;if(!g.openSearchLoad){var c=$("body").children("div");$("body").removeClass("hide-landing");$("body").addClass("show-landing");$("body").addClass("history-color");if(!g.isHome){$("#layout_appdown").attr("style","display:none;")}for(var e=0;e<c.length;e++){if($(c[e]).attr("id")!="search_land_searchland"&&!$(c[e]).attr("search_land_searchTransformation_show")){$(c[e]).attr("style","display:none;")}}$("body").children("footer").attr("style","display:none;");if(g.showFuncObj&&g.showFuncObj.func){var f=g.showFuncObj.source?g.showFuncObj.source:null;g.showFuncObj.func.call(f)}$("#"+g.searchPanelId).removeClass("on-blur");$("#"+g.searchPanelId).addClass("on-focus");window.scrollTo(0,1);g.openSearchLoad=true;g.searchLoop=true;g.isHistoryPanel=false}else{$("body").removeClass("show-landing");$("body").removeClass("history-color");$("body").addClass("hide-landing");var c=$("body").children("div");if(!g.isHome&&!$("#layout_appdown").attr("search_land_searchTransformation_show")){$("#layout_appdown").attr("style","")}$("#search_land_searchland").html("");for(var e=0;e<c.length;e++){if($(c[e]).attr("id")!="search_land_searchland"&&!$(c[e]).attr("search_land_searchTransformation_show")){$(c[e]).attr("style","")}}$("body").children("footer").attr("style","");if(g.hideFuncObj&&g.hideFuncObj.func){var f=g.hideFuncObj.source?g.hideFuncObj.source:null;g.hideFuncObj.func.call(f)}g.openSearchLoad=false;g.searchLoop=false;g.searchLocalStorage=false;g.isHistoryPanel=false;g.oldkeyword="";$("#"+g.controlId).html("");$("#"+g.searchPanelId).removeClass("on-focus");$("#"+g.searchPanelId).addClass("on-blur");$("#"+g.hotKeyWordId).show();$("#"+g.hotKeyWordheadId).show()}},render:function(){var c=this;if(M.object.isObject(c.renderId)||M.object.isArray(c.renderId)){$(c.renderId).append(c.mainHtml())}else{$("#"+c.renderId).append(c.mainHtml())}$("body").addClass((c.isHome?"mhome":""));$("body").addClass("hide-landing");$("#"+c.keywordId).on("click",function(h){var f=null;if(c.isHome){if(c.openSearchLoad){f="MSearch_Search"}else{f="MHome_Search"}}else{f="MProductList_Search"}c.sendMping(f);if(!c.openSearchLoad){if(c.landSearchWordHide){$("#"+c.keywordId).val("")}else{var i=c.keyword;if(c.keywordIsObj){i=c.keyword.showWord?c.keyword.showWord:"";if(c.keyword.keyword){if(c.keyword.keyword!=c.keyword.realWord){var g=M.string.decodeHtml(c.keyword.keyword);$("#"+c.keywordId).val(g)}else{$("#"+c.keywordId).val("")}}$("#"+c.keywordId).attr("placeholder",i)}else{$("#"+c.keywordId).val(i)}}c.searchTransformation()}});$("#"+c.keywordId).on("keydown",function(g){if(g.keyCode=="13"){var f=$.trim($("#"+c.keywordId).val());var h=$.trim($("#"+c.keywordId).attr("placeholder"));if(f==""&&h!=""){f=h}if(f!=""){c.searchLandSubmit(f,"MSearch_Searchthi")}}return});$("#"+c.closeSearchLandBtnId).on("click",function(){if(c.openSearchLoad){c.searchTransformation();var f=c.keyword;if(c.keywordIsObj){f=c.keyword.showWord?c.keyword.showWord:"";if(c.keyword.keyword){if(c.keyword.keyword!=c.keyword.realWord){var e=M.string.decodeHtml(c.keyword.keyword);$("#"+c.keywordId).val(e)}else{$("#"+c.keywordId).val("")}}else{$("#"+c.keywordId).val("")}$("#"+c.keywordId).attr("placeholder",f)}else{$("#"+c.keywordId).val(f)}$("#"+c.keywordId).addClass("hilight1")}});$("#"+c.submitId).on("click",function(){var f=$.trim($("#"+c.keywordId).val());var g=$.trim($("#"+c.keywordId).attr("placeholder"));if(f==""&&g!=""){f=g}if(f!=""){var e=null;if(c.isHome){if(c.openSearchLoad){e="MSearch_SearchButton"}else{e="MHome_SearchButton"}}else{e="MSearch_SearchButton"}c.searchLandSubmit(f,e)}});$("#"+c.keywordId).on("keyup",function(){if($(this).val()!=c.keyword){$(this).removeClass("hilight1");$(this).addClass("hilight2")}else{$(this).removeClass("hilight2");$(this).addClass("hilight1")}});$("#"+c.claerKeywordBtnId).on("click",function(){$("#"+c.keywordId).val("");$("#"+c.keywordId)[0].focus();$(this).attr("style","display:none;")});c.searchLoadControl()}});a.clazz=b});M.define("Imglazyload",function(a){var b=function(c){};M.object.merge(b.prototype,{lazyLad:function(){var f=this;var k=$(window).height();var j=$("img[imgsrc]");var h=$(window).scrollTop();for(var e=0,c=j.size();e<c;e++){currentObj=$(j[e]);var g=currentObj.offset().top-k-200;if(parseInt(h)>=parseInt(g)){currentObj.addClass("opa1");currentObj.attr("src",currentObj.attr("imgsrc").replace(/http:/g,""));currentObj.removeAttr("imgsrc")}}}});a.clazz=b});var slide=(function(){var a=function(c){return new b(c)};function b(c){this.elem=c;this.oBox=document.querySelector(c);this.aLi=document.querySelectorAll(c+" [data-ul-child=child]");this.oUl=document.querySelector(c+" [data-slide-ul=firstUl]");this.now=0;this.on0ff=false}b.prototype={init:function(c){var c=c||{},e=this.aLi;this.defaults={startIndex:0,loop:false,smallBtn:false,number:false,laseMoveFn:false,location:false,preDef:"lnr",autoPlay:false,autoHeight:false,preFn:null,lastImgSlider:false,playTime:6000,callback:null,verticalCenter:false,fullScreen:true,total:0};b.extend(this.defaults,c);this.now=this.defaults.startIndex;this.initBtn();this.liInit();this.bind();if(this.aLi.length<2){if(this.defaults.smallBtn){this.oSmallBtn.style.display="none"}if(this.defaults.number){this.pageNub.style.display="none"}this.defaults.autoPlay=false;this.defaults.loop=false}if(this.defaults.autoPlay){this.pause();this.play()}},initBtn:function(){this.aLi=document.querySelectorAll(this.elem+" [data-ul-child=child]");var e=this.aLi;if(this.defaults.callback){this.defaults.callback(1)}if(this.defaults.smallBtn){this.oSmallBtn=document.querySelector(this.elem+' [data-small-btn="smallbtn"]');this.oSmallBtn.innerHTML=this.addSmallBtn();this.btns=document.querySelectorAll(this.elem+' [data-ol-btn="btn"]');for(var c=0;c<this.btns.length;c++){this.btns[c].className=""}this.btns[b.getNow(this.now,e.length)].className="active"}if(this.defaults.number){this.pageNub=document.getElementById("page-nub");this.slideNub=document.getElementById("slide-nub");this.slideSum=document.getElementById("slide-sum");this.slideNub.innerHTML=(this.now+1)%(this.aLi.length);this.slideSum.innerHTML=this.aLi.length}this.defaults.total=this.aLi.length;if(this.aLi.length==2||this.aLi.length==3){if(this.defaults.loop){this.oUl.innerHTML+=this.oUl.innerHTML}this.aLi=document.querySelectorAll(this.elem+" [data-ul-child=child]");this.need=true}},bind:function(){var g=this.oBox,f=b._device();if(!f.hasTouch){g.style.cursor="pointer";g.ondragstart=function(h){if(h){return false}return true}}var e="onorientationchange" in window;var c=e?"orientationchange":"resize";window.addEventListener(c,this);if(this.aLi.length<2){if(this.defaults.smallBtn){this.oSmallBtn.style.display="none"}if(this.defaults.number){this.pageNub.style.display="none"}return}g.addEventListener(f.startEvt,this);window.addEventListener("touchcancel",this);if(navigator.userAgent.indexOf("baidubrowser")!=-1){window.addEventListener("focusin",this);window.addEventListener("focusout",this)}else{window.addEventListener("blur",this);window.addEventListener("focus",this)}},liInit:function(){var f=this.aLi,h=f.length,c=this.aLi[0].offsetWidth,l=this.aLi[0].offsetHeight,p=this.oUl,o=this.oBox.offsetWidth,e=320,g=this.now,n=this;if(this.defaults.preFn){this.defaults.preFn()}for(var k=0;k<h;k++){b.setStyle(f[k],{WebkitTransition:"all 0ms ease",transition:"all 0ms ease",height:"auto"})}if(this.defaults.fullScreen){p.style.width=o*h+"px";if(this.defaults.autoHeight){e=this.oBox.offsetWidth;if(e>=640){e=640}for(var k=0;k<h;k++){f[k].style.width=e+"px"}var m=f[0].getElementsByTagName("img")[0];if(m){var j=new Image();j.onload=function(){n.oBox.style.height=f[0].offsetHeight+"px";n.oUl.style.height=f[0].offsetHeight+"px";if(n.defaults.verticalCenter){if(n.oBox.style.height.replace("px","")>=document.documentElement.clientHeight){n.oBox.parentNode.style.top="50px";n.oBox.parentNode.style.marginTop=0}else{n.oBox.parentNode.style.top="50%";n.oBox.parentNode.style.marginTop="-50%"}}for(var q=0;q<f.length;q++){f[q].style.height=f[0].offsetHeight+"px"}};j.src=m.src}else{this.oBox.style.height=f[0].offsetHeight+"px"}}}else{e=this.oBox.offsetWidth;if(e>=640){e=640}c=(e/320)*225;l=(e/320)*150;for(var k=0;k<h;k++){f[k].style.width=c+"px";f[k].style.height=l+"px"}p.style.width=c*h+"px";this.oBox.style.height=l+"px";this.oUl.style.height=l+"px";f[0].style.padding="0";o=c}if(this.defaults.loop){for(var k=0;k<h;k++){b.setStyle(f[k],{position:"absolute",left:0,top:0});if(k==b.getNow(g,h)){b.setStyle(f[k],{WebkitTransform:"translate3d("+0+"px, 0px, 0px)",transform:"translate3d("+0+"px, 0px, 0px)",zIndex:10})}else{if(k==b.getPre(g,h)){b.setStyle(f[k],{WebkitTransform:"translate3d("+-o+"px, 0px, 0px)",transform:"translate3d("+-o+"px, 0px, 0px)",zIndex:10})}else{if(k==b.getNext(g,h)){b.setStyle(f[k],{WebkitTransform:"translate3d("+o+"px, 0px, 0px)",transform:"translate3d("+o+"px, 0px, 0px)",zIndex:10})}else{if(k==b.getNextNew(g,h)){b.setStyle(f[k],{WebkitTransform:"translate3d("+o*2+"px, 0px, 0px)",transform:"translate3d("+o*2+"px, 0px, 0px)",zIndex:10})}else{b.setStyle(f[k],{WebkitTransform:"translate3d("+-o+"px, 0px, 0px)",transform:"translate3d("+-o+"px, 0px, 0px)",zIndex:9})}}}}}}else{for(var k=0;k<h;k++){b.setStyle(f[k],{WebkitTransform:"translate3d("+g*-o+"px, 0px, 0px)",transform:"translate3d("+g*-o+"px, 0px, 0px)"})}}},handleEvent:function(e){var c=b._device(),f=this.oBox;switch(e.type){case c.startEvt:if(this.defaults.autoPlay){this.pause()}this.startHandler(e);break;case c.moveEvt:if(this.defaults.autoPlay){this.pause()}this.moveHandler(e);break;case c.endEvt:if(this.defaults.autoPlay){this.pause();this.play()}this.endHandler(e);break;case"touchcancel":if(this.defaults.autoPlay){this.pause();this.play()}this.endHandler(e);break;case"orientationchange":this.orientationchangeHandler();break;case"resize":this.orientationchangeHandler();break;case"focus":if(this.defaults.autoPlay){this.pause();this.play()}break;case"blur":if(this.defaults.autoPlay){this.pause()}break;case"focusin":if(this.defaults.autoPlay){this.pause();this.play()}break;case"focusout":if(this.defaults.autoPlay){this.pause()}break}},startHandler:function(f){this.on0ff=true;var e=b._device(),g=e.hasTouch,i=this.oBox,c=this.now,h=this.aLi;i.addEventListener(e.moveEvt,this);i.addEventListener(e.endEvt,this);this.downTime=Date.now();this.downX=g?f.targetTouches[0].pageX:f.clientX-i.offsetLeft;this.downY=g?f.targetTouches[0].pageY:f.clientY-i.offsetTop;this.startT=b.getTranX(h[b.getNow(c,h.length)]);this.startNowT=b.getTranX(h[b.getNow(c,h.length)]);this.startPreT=b.getTranX(h[b.getPre(c,h.length)]);this.startNextT=b.getTranX(h[b.getNext(c,h.length)]);this.startNextN=b.getTranX(h[b.getNextNew(c,h.length)]);b.stopPropagation(f)},moveHandler:function(r){var o=this.oBox,f=b._device();if(this.on0ff){var p=f.hasTouch;var k=p?r.targetTouches[0].pageX:r.clientX-o.offsetLeft;var j=p?r.targetTouches[0].pageY:r.clientY-o.offsetTop;var c=this.aLi,h=c.length,e=this.now,u=c[0].offsetWidth;if(this.defaults.preDef=="all"){b.stopDefault(r)}for(var n=0;n<h;n++){b.setStyle(c[n],{WebkitTransition:"all 0ms ease",transition:"all 0ms ease"})}if(Math.abs(k-this.downX)<Math.abs(j-this.downY)){if(this.defaults.preDef=="tnd"&&this.defaults.preDef!="all"){b.stopDefault(r)}}else{if(Math.abs(k-this.downX)>10){if(this.defaults.preDef=="lnr"&&this.defaults.preDef!="all"){b.stopDefault(r)}if(this.defaults.loop){l=(this.startNowT+k-this.downX).toFixed(4);var t=(this.startPreT+k-this.downX).toFixed(4);var g=(this.startNextT+k-this.downX).toFixed(4);var m=(this.startNextN+k-this.downX).toFixed(4);b.move(c[b.getNow(e,h)],l,10,this.defaults.fullScreen);b.move(c[b.getPre(e,h)],t,10,this.defaults.fullScreen);b.move(c[b.getNext(e,h)],g,10,this.defaults.fullScreen);b.move(c[b.getNextNew(e,h)],m,10,this.defaults.fullScreen)}else{var l=b.getTranX(c[e]);if(l>0){var q=((this.startT+k-this.downX)/3).toFixed(4);for(var n=0;n<h;n++){b.move(c[n],q)}}else{if(Math.abs(l)>=Math.abs((h-1)*u)){var q=(this.startT+(k-this.downX)/3).toFixed(4);for(var n=0;n<h;n++){b.move(c[n],q)}if(this.defaults.laseMoveFn&&typeof this.defaults.laseMoveFn=="function"){var s=(q-this.startT).toFixed(4);this.defaults.laseMoveFn(s)}}else{var q=(this.startT+k-this.downX).toFixed(4);for(var n=0;n<h;n++){b.move(c[n],q)}}}}}}}else{o.removeEventListener(f.moveEvt,this);o.removeEventListener(f.endEvt,this)}b.stopPropagation(r)},endHandler:function(j){j.stopPropagation();this.on0ff=false;var g=Date.now(),f=b._device(),i=f.hasTouch,h=this.oBox,m=i?j.changedTouches[0].pageX:j.clientX-h.offsetLeft,l=i?j.changedTouches[0].pageY:j.clientY-h.offsetTop,c=this.aLi,k=c[0].offsetWidth,e=b.getTranX(c[b.getNow(this.now,c.length)]);if(m-this.downX<30&&m-this.downX>=0&&Math.abs(l-this.downY)<30){this.tab(e,"+=");return"click"}else{if(m-this.downX>-30&&m-this.downX<=0&&Math.abs(l-this.downY)<30){this.tab(e,"-=");return"click"}else{if(Math.abs(l-this.downY)-Math.abs(m-this.downX)>30&&m-this.downX<0){this.tab(e,"-=");return}if(Math.abs(l-this.downY)-Math.abs(m-this.downX)>30&&m-this.downX>0){this.tab(e,"+=");return}if(m<this.downX){if(this.downX-m>k/3||g-this.downTime<200){this.now++;this.tab(e,"++");return"left"}else{this.tab(e,"+=");return"stay"}}else{if(m-this.downX>k/3||g-this.downTime<200){this.now--;this.tab(e,"--");return"right"}else{this.tab(e,"-=");return"stay"}}}}b.stopPropagation(j);h.removeEventListener(f.moveEvt,this);h.removeEventListener(f.endEvt,this)},tab:function(f,m,g){var c=this.aLi,l=c.length,s=c[0].offsetWidth,r=this.oBox,h=b._device(),q=this,e=this.now;if(this.defaults.callback&&(m=="++"||m=="--")){this.defaults.callback((b.getNow(e,l)+1)%this.defaults.total==0?this.defaults.total:(b.getNow(e,l)+1)%this.defaults.total)}$(c[b.getNow(q.now,l)]).addClass("active").siblings().removeClass("active");if(this.defaults.loop){if(e<0){e=l-1;this.now=l-1}for(var p=0;p<l;p++){if(p==b.getPre(e,l)){var k;switch(m){case"++":k=300;break;case"--":k=0;break;case"+=":k=0;break;case"-=":k=300;break;default:break}b.setStyle(c[b.getPre(e,l)],{WebkitTransform:"translate3d("+-s+"px, 0px, 0px)",transform:"translate3d("+-s+"px, 0px, 0px)",zIndex:10,WebkitTransition:"all "+k+"ms ease",transition:"all "+k+"ms ease"});if(!q.defaults.fullScreen){b.setStyle(c[b.getPre(e,l)],{padding:"0.8%"})}}else{if(p==b.getNow(e,l)){b.setStyle(c[b.getNow(e,l)],{WebkitTransform:"translate3d("+0+"px, 0px, 0px)",transform:"translate3d("+0+"px, 0px, 0px)",zIndex:10,WebkitTransition:"all "+300+"ms ease",transition:"all "+300+"ms ease"});if(!q.defaults.fullScreen){b.setStyle(c[b.getNow(e,l)],{padding:"0"})}}else{if(p==b.getNext(e,l)){var k=300;switch(m){case"++":k=0;break;case"--":k=300;break;case"+=":k=300;break;case"-=":k=0;break;default:break}b.setStyle(c[b.getNext(e,l)],{WebkitTransform:"translate3d("+s+"px, 0px, 0px)",transform:"translate3d("+s+"px, 0px, 0px)",zIndex:10,WebkitTransition:"all "+k+"ms ease",transition:"all "+k+"ms ease"});if(!q.defaults.fullScreen){b.setStyle(c[b.getNext(e,l)],{padding:"0.8%"})}}else{if(p==b.getNextNew(e,l)){var k;switch(m){case"++":k=0;break;case"--":k=300;break;case"+=":k=300;break;case"-=":k=0;break;default:break}b.setStyle(c[b.getNextNew(e,l)],{WebkitTransform:"translate3d("+s*2+"px, 0px, 0px)",transform:"translate3d("+s*2+"px, 0px, 0px)",zIndex:10,WebkitTransition:"all "+k+"ms ease",transition:"all "+k+"ms ease"});if(!q.defaults.fullScreen){b.setStyle(c[b.getNextNew(e,l)],{padding:"0.8%"})}}else{b.setStyle(c[p],{WebkitTransform:"translate3d("+s*2+"px, 0px, 0px)",transform:"translate3d("+s*2+"px, 0px, 0px)",zIndex:9,WebkitTransition:"all "+0+"ms ease",transition:"all "+0+"ms ease"})}}}}}}else{for(var p=0;p<l;p++){b.setStyle(c[p],{WebkitTransition:"all "+300+"ms ease",transition:"all "+300+"ms ease"})}if(e<=0){e=0;this.now=0}if(e>l-1){if(g){e=0;this.now=0}else{e=l-1;this.now=l-1}}for(var o=0;o<l;o++){b.setStyle(c[o],{WebkitTransform:"translate3d("+(-e*s)+"px, 0px, 0px)",transform:"translate3d("+(-e*s)+"px, 0px, 0px)"})}}if(this.defaults.smallBtn){for(var p=0;p<this.btns.length;p++){this.btns[p].className=""}if(this.need){this.btns[b.getNow(e,l/2)].className="active"}else{this.btns[b.getNow(e,l)].className="active"}}if(this.defaults.number){this.slideNub.innerHTML=((b.getNow(e,l)+1)%this.defaults.total==0?this.total:(b.getNow(e,l)+1)%this.defaults.total)}c[b.getNow(e,l)].addEventListener("webkitTransitionEnd",n,false);c[b.getNow(e,l)].addEventListener("transitionend",n,false);function n(){if(q.defaults.location){if(f<-(l-1)*s-s/5){if(q.defaults.lastImgSlider&&typeof q.defaults.lastImgSlider=="function"){q.defaults.laseMoveFn(0);q.defaults.lastImgSlider()}}}c[b.getNow(q.now,l)].removeEventListener("webkitTransitionEnd",n,false);c[b.getNow(q.now,l)].removeEventListener("transitionend",n,false)}},play:function(){var c=this;c.timer=setInterval(function(){c.now++;c.tab(null,"++",true)},this.defaults.playTime)},pause:function(){var c=this;clearInterval(c.timer)},orientationchangeHandler:function(){var c=this;setTimeout(function(){c.liInit()},300)},addSmallBtn:function(){var e="",f=this.aLi;for(var c=0;c<f.length;c++){if(c==this.defaults.startIndex){e+='<span class="active" data-ol-btn="btn"></span>'}else{e+='<span data-ol-btn="btn"></span>'}}return e},show:function(){this.oBox.style.display="inline-block"},hide:function(){this.oBox.style.display="none"}};b.extend=function(e,c){for(name in c){if(c[name]!==undefined){e[name]=c[name]}}};b.extend(b,{setStyle:function(e,c){for(name in c){e.style[name]=c[name]}},getTranX:function(f){var e=f.style.WebkitTransform||f.style.transform;var g=e.indexOf("translate3d(");var c=parseInt(e.substring(g+12,e.length-13));return c},_device:function(){var g=!!("ontouchstart" in window||window.DocumentTouch&&document instanceof window.DocumentTouch);var e="touchstart";var f="touchmove";var c="touchend";return{hasTouch:g,startEvt:e,moveEvt:f,endEvt:c}},getNow:function(e,c){return e%c},getPre:function(f,c){if(f%c-1<0){var e=c-1}else{var e=f%c-1}return e},getNext:function(f,e){var c=(f+1)%e;return c},getNextNew:function(f,e){var c=(f+2)%e;return c},move:function(h,e,g,c){var i=g||null;if(i){h.style.zIndex=i}b.setStyle(h,{WebkitTransform:"translate3d("+e+"px, 0px, 0px)",transform:"translate3d("+e+"px, 0px, 0px)"});if(!c){var f=parseFloat(e)/100;if(f>0.8){f=0.8}else{if(-0.8<f<0){f=(-f)}else{if(f<=-0.8){f=0.8}}}b.setStyle(h,{padding:f+"%"})}},stopDefault:function(c){if(c&&c.preventDefault){c.preventDefault()}else{window.event.returnValue=false}return false},stopPropagation:function(c){if(c&&c.stopPropagation){c.stopPropagation()}else{c.cancelBubble=true}}});return a})();M.define("index",function(a){var b=function(c){this.init(c)};M.object.merge(b.prototype,{init:function(e){this.threadTime=500;this.thread=new (M.exports("thread").clazz)({time:this.threadTime});this.imgHigth={all:0,brand:{},discount:{}};if(M.object.isObject(e)){this.url=e&&e.url?e.url:"";this.autoseckill=(e&&e.autoSeckill)?e.autoSeckill:false;this.lastseckillTime=null;this.newseckillurl=(!!e.index_newseckill&&!!e.index_newseckill.url)?e.index_newseckill.url:"http://ms.m.jd.com/seckill/seckillList";this.sliderInit(e);this.seckillInit(e);this.floatLayerInit(e.indexFloatLayer);this.recommendInit(e.recommend);this.hasAppBanner=e&&e.appBanner?e.appBanner.isOpen:false;this.appBannerType=e&&e.appBanner?e.appBanner.indexClientType:0;this.beenshield=false;this.recommendhasrender=false;this.appBannerID="download_banner";this.openapp="download_openapp";this.openweb="download_openweb";this.bannerobj=(!!e.appBanner&&!M.object.isEmpty(e.appBanner.banner))?e.appBanner.banner:null;this.slider=[];this.navigator=e.navigationlayer;this.ishttpinvoke=(e._hybridinvoke&&e._hybridinvoke.ishttpinvoke)?e._hybridinvoke.ishttpinvoke:false;this.$=$(window)}var c="";var c=e.searchland.searchBoxWord;this.searchLand=new (M.exports("searchland").clazz)({showFuncObj:{source:this,func:function(){this.indexBodyheight=$("body").height();$("body").css("height","auto");var g=$("#"+this.appBannerID+"");if(g&&g.height()>0){var h=$("#fixedtop");var k=$("#topheader");var f=h.children("div");for(var j=0;j<f.length;j++){if(!$(f[j]).attr("search_land_searchTransformation_show")){$(f[j]).css("display","none")}}k.css("display","none")}}},hideFuncObj:{source:this,func:function(){$("#index_clear_keyword").hide();$("body").css("height",this.indexBodyheight);var g=$("#"+this.appBannerID+"");var h=$("#fixedtop");h.css("display","none");var f=h.children("div");for(var j=0;j<f.length;j++){if(!$(f[j]).attr("search_land_searchTransformation_show")){$(f[j]).css("display","block")}}setTimeout(function(){var i={display:"block"};h.css(i);if(h[0].className.indexOf("showfixedtop-half")<0&&g.height()>0){var k=$("#topheader");k.css("display","block")}},200);window.scrollTo(0,this.indexloc)}},claerKeywordBtnId:"index_clear_keyword",searchPanelId:"index_search_head",keyword:c,renderId:$(document.body),landSearchWordHide:true,hotKeyword:e.searchland.hotKeyword?e.searchland.hotKeyword:null,submitId:"index_search_submit",formId:"index_searchForm",catelogyListId:"index_category",keywordId:"index_newkeyword",isHome:true,closeSearchLandBtnId:"index_search_bar_cancel"});this.imgLazyLad=new (M.exports("Imglazyload").clazz)();this.runtopId="indexToTop"},pseudouuid:function(h){var e=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];var c=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];var k=7;var j=[];j.push(e[this.random(e.length)]);for(var g=1,f=k-1;g<f;g++){if(g%2==0){j.push(this.random(10))}else{j.push(c[this.random(26)])}}j.push(this.random(10));return j.join("")},random:function(c,e){if(!!!e){e=0}return Math.floor(e+Math.random()*(c-e))},sliderInit:function(h){var c=this;if(h.sliderImgList&&M.object.isArray(h.sliderImgList)){c.sliderImgList=h.sliderImgList}else{c.sliderImgList=[]}if(h.hybridslider&&M.object.isArray(h.hybridslider)){c.hybridslider=h.hybridslider;c._lazyslider={list:[],count:0};for(var e=0,f=c.hybridslider.length;e<f;e++){var l=c.hybridslider[e];var m=l.floorid;var k=l.no;c._lazyslider.list.push({id:"#slider_"+m+"_"+k+"_touch",created:false})}}else{c.hybridslider=[]}c._sliderImgList={};c._hybridslider={};for(var g=0,n=c.sliderImgList.length;g<n;g++){var o=c.sliderImgList[g];c._sliderImgList[g]=o}for(var g=0,n=c.hybridslider.length;g<n;g++){var o=c.hybridslider[g];c._hybridslider[o.floorid]=o}},sliderHTML:function(){var f=[];var j=this;for(var e=1;e<j.sliderImgList.length;e++){var c=j.sliderImgList[e];f.push('<li  data-ul-child="child"  class="slide-li"  ><a class="J_ping"  report-eventlevel="1" report-eventid="MHome_BFocusPic" report-eventparam="'+c.sourceValue+'" page_name="index" href="'+c.url+'" ><img alt="'+c.title+'"  src="'+c.img+'"  /></a></li>')}f=f.join("");var h=$("#slider_touch");h.append(f);var g=h.children("li").first().height()+"px";h.css({"min-height":g})},seckillInit:function(l,e){var c=this;if(l.seckill){var p=(e&&(c.seclayout.gapwidth>0))?(' style = "width:'+c.seclayout.gapwidth+'px"'):"";if(!!!e){c.seclayout={urlobj:$("#seckillul"),liobj:null,urlwidth:0,gapwidth:0,more:50}}if(l.seckill.seckillTime&&l.seckill.timeRemain){c.endTime=l.seckill.seckillTime;c.timeRemain=l.seckill.timeRemain;var h=l.seckillImgList;c.seclayout.seclist=h;c.seclayout.container=c.seclayout.urlobj.parent();var f=[];var j="";for(var k=e?0:3,n=h.length;k<n;k++){var m=h[k];var g=m.wareId?("?wareId="+m.wareId):"";f.push('<li class="seckill-new-item" '+p+'><div class="seckill-item-img bdr-r"><a report-eventid="MHome_BHandSeckill" report-eventlevel="1"  report-eventparam="'+m.sourceValue+'" page_name="index" href="'+c.newseckillurl+g+'" class="seckill-new-link J_ping"><img width="100%"  '+(e?('src="'+m.imageurl.replace(/http:/g,"")+'"'):(' src="'+c.url+'/images/index/seckill-220-new.png" imgsrc="'+m.imageurl+'" '))+' border="0" class="seckill-photo" /><div class="seckill-tip tagType-seckill-'+m.tagType+"  tagCount-seckill-"+m.tagCount+'">'+m.tagText+'</div></a></div><div class="seckill-item-price"><span class="seckill-new-price">&yen;'+m.miaoShaPrice+'</span><span class="seckill-original-price">&yen;'+m.jdPrice+"</span></div></li>")}if(h.length>3){f.push('<li class="seckill-all-item"><a href="'+c.newseckillurl+'"><div class="seckill-all"><i class="show-all-icon"></i><span class="show-all-title">查看全部</span></div></a></li>');if(e){c.seclayout.urlobj.html(f.join(""))}else{c.seclayout.urlobj.append(f.join(""))}}c.seckillTime=1000;var o=$("#seckill_time").find("span");c.timezone=[o.eq(0),o.eq(1),o.eq(2),o.eq(3),o.eq(4),o.eq(5),o.eq(6),o.eq(7)];c.seckillTimer()}}},seckillTimer:function(){var c=this;var e=M.localstorage.get("index_seckill");var o=0;if(e){e=e.split("_");var l=e[0];var s=parseInt(e[1],10);var r=M.date.toDate(e[2]);var t=parseInt(e[3],10);if(c.endTime==l&&c.timeRemain==s){var f=new Date();var k=parseInt((f.getTime()-r.getTime())/1000,10);o=t-k;M.localstorage.set("index_seckill",c.endTime+"_"+c.timeRemain+"_"+M.date.toString(f,"yyyy-MM-dd HH:mm:ss")+"_"+o)}else{var f=new Date();o=c.timeRemain;M.localstorage.set("index_seckill",c.endTime+"_"+c.timeRemain+"_"+M.date.toString(f,"yyyy-MM-dd HH:mm:ss")+"_"+o)}}else{var f=new Date();o=c.timeRemain=c.timeRemain-1;M.localstorage.set("index_seckill",c.endTime+"_"+c.timeRemain+"_"+M.date.toString(f,"yyyy-MM-dd HH:mm:ss")+"_"+o)}var p=c.timezone;if(o>0){var u=o%60;var h=parseInt(o/60,10);var j=h%60;var i=parseInt(h/60,10);if(i<=0){p[0].text("0");p[1].text("0")}else{if(i>99){p[0].text("9");p[1].text("9")}else{if(i>9&&i<99){var i=i+"";p[0].text(i[0]);p[1].text(i[1])}else{var i=i+"";p[0].text("0");p[1].text(i[0])}}}if(j<=0){p[3].text("0");p[4].text("0")}else{if(j>9){j=j+"";p[3].text(j[0]);p[4].text(j[1])}else{p[3].text(0);p[4].text(j)}}if(u<=0){p[6].text("0");p[7].text("0")}else{if(u>9){u=u+"";p[6].text(u[0]);p[7].text(u[1])}else{p[6].text(0);p[7].text(u)}}}else{p[0].text("0");p[1].text("0");p[3].text("0");p[4].text("0");p[6].text("0");p[7].text("0");c.seckillpause=true;var g=document.getElementById("seckill_loading");var q=function(){M.http.ajax({url:"/index/nextseckill.action?r="+new Date().getTime(),data:"_format_=json",success:function(v){if(v&&v.seckill){try{data=JSON.parse(v.seckill);var m={seckill:{}};if(data&&data.indexMiaoSha.length>0){m.seckill={seckillTime:data.overDate,timeRemain:data.timeRemain};m.seckillImgList=data.indexMiaoSha}c.seckillInit(m,true);c.seckillpause=false;if(c.seclayout){seckillimg=c.seclayout.urlobj.find("img");c.resizeSeckZone();var x=seckillimg.length;seckillimg.each(function(){var y=this;y.onload=function(){x--;if(x%5==0){c.resizeSeckimg(seckillimg)}}})}}catch(w){c.log("nextseckill error!",w);data=null}g.className=""}},error:function(m){g.className=""}})};if((new Date()).getTime()-M.date.toDate(c.endTime).getTime()>1000*60){return}if(c.lastseckillTime!=null&&((new Date()).getTime())-c.lastseckillTime.getTime()<3600000){return}if(c.autoseckill){c.lastseckillTime=new Date();g.className="seckill-loading";g.onclick=null;var n=c.random(5)+Math.random();setTimeout(q,n*1000)}else{g.className="seckill-nextsec";var n=0;g.onclick=q}}},seckillRun:function(e){var c=this;c.seckillTime=c.seckillTime-e;if(c.seckillTime==0){c.seckillTime=1000;if(c.seckillpause){return}c.seckillTimer()}},seckillRender:function(){var c=this;c.thread.addOne({name:"seckill",event:c.seckillRun,source:c})},appBannerBind:function(){var o=this;var c=!!o.bannerobj?o.bannerobj:{content1:"免费领取188元大礼包",content2:"首次下单前即可领取",logo:(o.url+"/images/index/top-jdlogo.png"),icon:"立即领取"};var q=o.appBannerID;var p=o.openapp;var j=o.openweb;var s=o.appBannerType;var i=document.createElement("div");i.id=q;var k=!!c.bg;i.className="download-pannel"+(!k?" download-noBg":"");var u="/images/index/immediately3.png";var n=[c.content1,c.content2];var f=[];if(k){f.push('<div class="pannel-bg"><img src="'+c.bg+'"></div>')}f.push('<div class="download-close"><img  id="'+j+'"   src="'+o.url+'/images/index/icon-close-banner.png"></div>');f.push('<div class="download-logo"><img src="'+c.logo+'"></div>');f.push('<div class="download-txt"><span class="download-content"><em class="content-up">'+c.content1+'</em><em class="content-down">'+c.content2+"</em></span></div>");f.push('<div class="download-action"><a id="'+p+'" href="javascript:;"><span '+(c.icon.length<=4?'class="font-large"':"")+">"+c.icon+"</span></a></div>");i.innerHTML=f.join("");$("#index_search_main").before(i);var m=$("#"+q);if(o.hasAppBanner){m.on("touchmove",function(w){if(w&&w.preventDefault){w.preventDefault()}else{window.event.returnValue=false;return false}});$("#"+p+"").on("touchmove",function(w){if(w&&w.preventDefault){w.preventDefault()}else{window.event.returnValue=false;return false}});$("#"+j+"").on("touchmove",function(w){if(w&&w.preventDefault){w.preventDefault()}else{window.event.returnValue=false;return false}});var g=navigator.userAgent.indexOf("360 Aphone")>=0||navigator.userAgent.indexOf("QHBrowser")>=0||navigator.userAgent.indexOf("360 Iphone")>=0;var v=M.url.getParam("utm_campaign");if(v&&v=="t_vivobrowser_vivobrowser"){g=true}if(!g){var i=document.createElement("div");var l=null;var t=null;var h=null;var r=null;switch(s){case 1:l="MDownLoadFloatTop_OpenImmediately";t="MDownLoadFloatTop_CloseImmediately";r="MDownLoadFloatTop_Expose_VirtualImmediately";h="//h5.m.jd.com/active/download/download.html?channel=jd-mxz3";break;case 2:l="MDownLoadFloatTop_OpenNow";t="MDownLoadFloatTop_Close";r="MDownLoadFloatTop_Expose_Virtual";h="//h5.m.jd.com/active/download/download.html?channel=jd-mxz1";break;case 0:l="MDownLoadFloatTop_OpenC";t="MDownLoadFloatTop_CloseC";r="MDownLoadFloatTop_Expose_VirtualC";h="//h5.m.jd.com/active/download/download.html?channel=jd-mcs1";break;default:break}var e={openAppBtnId:p,closePanelBtnId:j,closePanelId:q,downAppURl:h,closeCallblack:function(){var w=this;m.attr("search_land_searchTransformation_show","true");w.indexFloatLayerRunOpen=true;$("#topheader").css("display","none");w.beenshield=true},closeCallblackSource:o,cookieFlag:"m_index",openAppEventId:l,closePanelEventId:t,sourceType:"M",sourceValue:"index"};$.downloadAppPlugIn(e);if(m.css("display")!="none"){M.require("//wl.jd.com/mping.min.js",function(){try{var x=new MPing.inputs.Click(r);x.event_param="";var w=new MPing();w.send(x)}catch(y){M.log(d,"error")}})}}else{o.indexFloatLayerRunOpen=true}}else{o.indexFloatLayerRunOpen=true}},floatLayerInit:function(c){var e=this;if(c&&c.url&&$.trim(c.url)!="0"){e.floatUrl=c.url;e.indexFloatLayerId="indexFloatLayer";e.indexFloatLayerRunOpen=false;e.indexFloatLayerRunTimer=0}},navigatorRender:function(h){h=isNaN(Number(h))?-1:Number(h);var c=[];var e=this.navigator;var m=false;var k=e==null?null:e.navigationconfig;if(e==null||typeof(k)=="undefined"||k.length<4||k.length>5){return}var f=this.url==null?"":this.url;f=(e.isdefault&&e.isdefault==1)?f:"";c.push('<div class="floor bottom-bar-pannel"><div class="floor-container '+(m?"bdr-top":"")+'">');c.push('<ul class="tab'+k.length+'">');for(var g=0,l=k.length;g<l;g++){var j=(g==h)?k[g].optlableImage:k[g].lableImage;if(g==h){k[g].murl="javascript:void(0)"}if(l==5&&g==2){c.push('<li><span class="bar-img"></span></li>')}else{c.push('<li><span class="bar-img"><a class="J_ping" report-eventlevel="1" report-eventid="MHome_BBottomTab"  report-eventparam="'+k[g].functionId+'" page_name="index" href="'+k[g].murl+'"><img src="'+f+j.replace(/http:/g,"")+'"></a></span></li>')}}c.push("</ul></div></div>");if(k.length==5){c.push('<div class="floor bottom-bar-activity"><span class="bar-img">');c.push('<a class="J_ping" report-eventlevel="1" report-eventid="MHome_BBottomTab"  report-eventparam="'+k[2].functionId+'" page_name="index" href="'+k[2].murl+'"><img src="'+f+k[2].lableImage.replace(/http:/g,"")+'"></a>');c.push("</span></div>")}$("#newviewport").append(c.join(""))},floatLayerRender:function(){var c=this;if(c.floatUrl){c.thread.addOne({name:"floatLayer",event:function(){var f=this;if(f.indexFloatLayerRunOpen){if($("#"+f.indexFloatLayerId).css("transform")=="none"||$("#"+f.indexFloatLayerId).css("-webkit-transform")=="none"||$("#"+f.indexFloatLayerId).css("transform")==""||$("#"+f.indexFloatLayerId).css("-webkit-transform")==""||$("#"+f.indexFloatLayerId).css("transform")=="translateX(0px)"||$("#"+f.indexFloatLayerId).css("-webkit-transform")=="translateX(0px)"){if(f.indexFloatLayerRunTimer>12){f.indexFloatLayerRunTimer=0}f.indexFloatLayerRunTimer++;if(f.indexFloatLayerRunTimer==12){var e={transform:"translateX(40px)","-webkit-transform":"translateX(40px)","-webkit-transition":"0.2s ease 0s",transition:"0.2s ease 0s"};$("#"+f.indexFloatLayerId).css(e);setTimeout(function(){var g={transform:"translateX(40px)","-webkit-transform":"translateX(40px)","-webkit-transition":"",transition:""};$("#"+f.indexFloatLayerId).css(g)},200)}}else{f.indexFloatLayerRunTimer=0}}},source:c});c.floatLayerBind();$("#"+c.indexFloatLayerId).css("display","block")}},floatLayerBind:function(){var c=this;if(c.floatUrl){$("#"+c.indexFloatLayerId).on("click",function(){var e={transform:"translateX(0px)","-webkit-transform":"translateX(0px)","-webkit-transition":"0.2s ease 0s",transition:"0.2s ease 0s"};$("#"+c.indexFloatLayerId).css(e);setTimeout(function(){location.href=c.floatUrl},200)})}},searchhandler:function(){var c=this;document.getElementById("index_newkeyword").addEventListener("click",function(h){if(!!!c.searchLand.openSearchLoad){try{var g=new MPing.inputs.Click("MHome_BSearch");g.event_param="";g.event_level="1";var f=new MPing();f.send(g)}catch(h){}}});c.searchLand.render()},toTopBind:function(){var c=this;$("#"+c.runtopId).on("click",function(){window.scrollTo(0,0);var e=$("#"+c.appBannerID+"");if(e&&e.height()>0){var f=$("#fixedtop");var g=$("#topheader");f.removeClass("showfixedtop-half").addClass("showfixedtop");g.css("display","block");c.under=1}if($("#slider").height()>0){$($("#index_search_head").children()[0]).css("opacity",0)}})},recordIndexLoc:function(){var f=this;$("#index_searchLogin").on("click",function(){M.cookie.setCookie("location",$(window).scrollTop(),0.0035,"","jd.com")});var c=M.url.getParam("indexloc");if(c&&c=="1"){var g=M.cookie.getCookie("location");M.cookie.delCookie("location");var e=parseInt(g);if(!isNaN(e)){$(window).on("load",function(){window.scrollTo(0,e);if(e>=50){var h=$("#"+f.appBannerID+"");if(h&&h.height()>0){topheader.css("display","none");fixedtop.removeClass("showfixedtop").addClass("showfixedtop-half")}}})}}},recommendInit:function(e){var c=this;if(e){c.recommendPin=e.pin;c.recommendUesCached=e.useCached;c.recommendOpen=e.open;c.recommendPage=0;c.recommendPageCount=1;c.recommendListId="recommendList";c.recommendListLoadId="recommendListload";c.recommendListloadImg="recommendListloadImg";c.recommendListLoadMoreBtn="recommendListLoadMoreBtn";c.recommendCanLoad=true;c.recommendloadHeight=0;c.hasRecommenddata=true}},recommendLoadData:function(){var i=this;if(i.recommendCanLoad&&i.hasRecommenddata){i.recommendCanLoad=false;$("#"+i.recommendListLoadId).css("display","block;");$("#"+i.recommendListloadImg).css("display","block;");$("#"+i.recommendListLoadMoreBtn).css("display","none;");var e="indexRecommendData_new";var h=null;if(i.recommendUesCached){var f=M.localstorage.get(e);f=JSON.parse(f);if(f&&f.length==2){if(i.recommendPin){h=f[1];if(h.length>=(i.recommendPage+1)){h=h[i.recommendPage]}else{h=null}}else{h=f[0];if(h.length>=(i.recommendPage+1)){h=h[i.recommendPage]}else{h=null}}if(!h||(new Date().getTime()-h.updateTime)>(4*60*60*1000)||h.pin!=i.recommendPin){h=null}}else{var j=JSON.stringify([[],[]]);M.localstorage.set(e,j)}}else{M.localstorage.remove(e)}if(h==null){M.http.ajax({url:"/index/recommend.action",data:"_format_=json&page="+(i.recommendPage+1),success:function(m){var n=false;var p=false;if(m&&m.recommend){try{h=JSON.parse(m.recommend)}catch(r){M.log(r,"error");h=null;i.hasRecommenddata=false}if(h&&h.wareInfoList&&h.wareInfoList.length>0){h.recommendList=h.wareInfoList}if(h&&h.recommendList&&h.recommendList.length==0){i.hasRecommenddata=false;p=true}if(h&&h.recommendList&&h.recommendList.length>0){if(i.recommendPage==0){var l=i.recommendMainHtml(h);$("#newviewport").append(l);i.recommendBind();i.recommendAddExposeBind()}var q=i.recommendListHtml(h);$("#"+i.recommendListId).append(q);i.calculationRecommendImg();if(i.recommendUesCached){h.updateTime=new Date().getTime();h.pin=i.recommendPin;var o=M.localstorage.get(e);o=JSON.parse(o);if(o&&M.object.isArray(o)){if(i.recommendPin){if(o[1].length>=(i.recommendPage+1)){o[1][i.recommendPage]=h}else{o[1].push(h)}}else{if(o[0].length>=(i.recommendPage+1)){o[0][i.recommendPage]=h}else{o[0].push(h)}}}M.localstorage.set(e,JSON.stringify(o))}i.recommendPage++;var s=M.url.getParam("recommend");if(s=="1"&&i.recommendPage==1){M.url.setHash("recommend");window.location=window.location}i.imgLazyLad.lazyLad();i.recommendloadHeight=$("#scwrapper").height()-$("#"+i.recommendListId).find("li").eq(0).height()*4;if(i.recommendPage%3==0&&i.hasRecommenddata){n=true}else{n=false}p=true}}if(p){if(n){$("#"+i.recommendListLoadId).css("display","block;");$("#"+i.recommendListloadImg).css("display","none;");$("#"+i.recommendListLoadMoreBtn).css("display","block;")}else{$("#"+i.recommendListLoadId).css("display","none;");$("#"+i.recommendListloadImg).css("display","none;");$("#"+i.recommendListLoadMoreBtn).css("display","none;");i.recommendCanLoad=true}}else{i.recommendloadHeight=$("#scwrapper").height()-$("#"+i.recommendListId).find("li").eq(0).height()*4;i.recommendCanLoad=false;$("#"+i.recommendListLoadId).css("display","none;");$("#"+i.recommendListloadImg).css("display","none;");$("#"+i.recommendListLoadMoreBtn).css("display","none;")}},error:function(){i.recommendloadHeight=$("#scwrapper").height()-$("#"+i.recommendListId).find("li").eq(0).height()*4;i.recommendCanLoad=false;$("#"+i.recommendListLoadId).css("display","none;");$("#"+i.recommendListloadImg).css("display","none;");$("#"+i.recommendListLoadMoreBtn).css("display","none;")}})}else{if(i.recommendPage==0){var c=i.recommendMainHtml(h);$("#newviewport").append(c);i.recommendBind();i.recommendAddExposeBind()}var g=i.recommendListHtml(h);$("#"+i.recommendListId).append(g);i.calculationRecommendImg();var k=M.url.getParam("recommend");i.recommendPage++;i.recommendloadHeight=$("#scwrapper").height()-$("#"+i.recommendListId).find("li").eq(0).height()*4;if(k=="1"&&i.recommendPage==1){M.url.setHash("recommend");window.location=window.location}i.imgLazyLad.lazyLad();if(i.recommendPage%3==0&&i.hasRecommenddata){$("#"+i.recommendListLoadId).css("display","block;");$("#"+i.recommendListloadImg).css("display","none;");$("#"+i.recommendListLoadMoreBtn).css("display","block;")}else{$("#"+i.recommendListLoadId).css("display","none;");$("#"+i.recommendListloadImg).css("display","none;");$("#"+i.recommendListLoadMoreBtn).css("display","none;");i.recommendCanLoad=true}}}i.recommendhasrender=true},recommendMainHtml:function(f){var e=this;var c=[];if(f&&f.recommendList&&f.recommendList.length>0){c.push('<div id="recommend" class="floor love-floor" id="love-floorID">');c.push('<div class="gray-text"><span class="gray-layout"><span class="gray-text-img"></span>为您推荐</span></div>');c.push('<ul class="find-similar-ul cf" id="'+e.recommendListId+'">');c.push("</ul>");c.push('<div style="clear: left;"></div>');c.push('<div style="display: none;" class="swipe-up love-loading" id="'+e.recommendListLoadId+'">');c.push('<div class="swipe-up-wrapper ">');c.push('<div style="display: none;" id="'+e.recommendListloadImg+'" class="loading-con">');c.push('<span class="pagenum" id="showPageID"></span>');c.push('<span class="loading"><i class="love-loading-icon">加载中...</i></span>');c.push('<div class="clear"></div>');c.push("</div>");c.push('<div style="display: none;" id="'+e.recommendListLoadMoreBtn+'" class="click-loading"><a href="javascript:void(0);">点击继续加载</a></div>');c.push("</div>");c.push("</div>");c.push("</div>")}return c.join("")},recommendListHtml:function(g){var c=this;var f=c.url==null?"":c.url;var j=[];if(g&&g.recommendList&&g.recommendList.length>0){for(var h=0;h<g.recommendList.length;h++){var e=g.recommendList[h];var l=e.itemType;var m=e.clickUrl;if((l&&l!="0")||(e.type&&e.type!="ware")){continue}j.push('<li class="similar-li"><a  '+((!!m)?(' clickUrl="'+m+'" '):"")+' class="J_ping" report-eventlevel="1" report-eventid="MHomeGuessYouLike_BProducts"  report-eventparam="'+(c.recommendPage*20+h+1)+"_"+e.wareId+'_1" page_name="index" href="http://item.m.jd.com/product/'+e.wareId+'.html">');j.push('<div alt="'+e.wname+'" class="similar-product"><img class="Jschangewidth" src="'+f+'/images/index/m-home-pic-new.png" imgsrc="'+e.imageurl.replace(/http:/g,"")+'" >');j.push('<span class="similar-product-text">'+e.wname+"</span>");j.push("</a>");j.push('<span class="similar-product-price">');if(!!e.jdPrice){e.jdPrice=e.jdPrice+"";var k=e.jdPrice.split(".");if(!!k){j.push("&yen;");if(!!k[0]){j.push('<span class="big-price">'+k[0]+"</span>")}if(!!k[1]){j.push('<span class="small-price">.'+k[1]+"</span>")}}}j.push("</span>");j.push('</div><a class="guess-button J_ping" report-eventlevel="1" report-eventid="MHomeGuessYouLike_BSimilarities"  report-eventparam="'+(c.recommendPage*20+h+1)+"_"+e.wareId+'_1" page_name="index" href="//home.m.jd.com/myjd/similar/list.action?skuId='+e.wareId+'">看相似</a>');j.push("</li>")}}return j.join("")},recommendAddExposeBind:function(){document.getElementById("recommend").addEventListener("click",function(g){try{var f=g.target||g.srcElement;while(f.id!="recommend"&&f.tagName.toLowerCase()!="a"){f=f.parentNode}if(f.tagName.toLowerCase()=="a"){var c=f.getAttribute("clickUrl");if(c!=null){$.getJSON(c+"&jsoncallback=?",function(e){})}}}catch(g){source.log("recommendAddExposeBind error!",g)}})},recommendBind:function(){var c=this;if(c.recommendOpen){$("#"+c.recommendListLoadMoreBtn).on("click",function(f){c.recommendCanLoad=true;c.recommendLoadData()})}},recommendRender:function(){var c=this;if(c.recommendOpen&&!c.recommendhasrender){c.recommendLoadData();c.recommendhasrender=true}},calculationRecommendImg:function(){var e=this;var c=$("body").width();$("#"+e.recommendListId).find("img").forEach(function(g,f){var h=$(g).parent().width();$(g).css({width:h,height:h})})},resizeFunction:function(){var g=this;var e="onorientationchange" in window;var c=e?"orientationchange":"resize";var f=null;if(this.seclayout){f=this.seclayout.urlobj.find("img");g.resizeSeckZone();var h=f.length;f.each(function(){var i=this;i.onload=function(){h--;if(h%5==0){g.resizeSeckimg(f)}}})}$(window).on(c,function(){if(g.recommendOpen&&g.recommendCanLoad){g.recommendloadHeight=$("#scwrapper").height()-$("#"+g.recommendListId).find("li").eq(0).height()*4}g.calculationRecommendImg();try{var i=navigator.userAgent.indexOf("iPhone")>=0&&navigator.userAgent.indexOf("MQQBrowser")>=0;if(!i&&g.seclayout){g.resizeSeckZone();g.resizeSeckimg(f,true)}}catch(j){g.log("resizeSeckimg error!",j)}g.imgLazyLad.lazyLad()})},resizeSeckZone:function(){var g=this.seclayout;if(g.seclist.length<=3){return}var e=g.urlobj.find("li");var h=(g.container.width()-50)/3;for(var f=0,c=e.length-1;f<c;f++){e[f].style.width=h+"px"}g.gapwidth=h;g.urlwidth=h*(e.length-1)+g.more;g.urlobj.width(g.urlwidth);if(g.touchobj){g.touchobj.fixetRootWidth(g.urlwidth-g.container.width());g.touchobj.basegap=g.gapwidth;g.touchobj.goToEnd(10,g.touchobj.tar,g.touchobj.rootWidth,null)}},resizeSeckimg:function(h,g){for(var f=0,c=h.length;f<c;f++){var e=parseInt($(h[f]).width(),10);var j=parseInt($(h[f]).height(),10);if(g||e!=j){$(h[f]).height(e+"px")}}},loadSeckimg:function(h,g){var k=($(window).width()-20)/3;for(var f=3,c=h.length;f<c;f++){h[f].style.width=k+"px";h[f].style.height=k+"px";var e=parseInt($(h[f]).width(),10);var j=parseInt($(h[f]).height(),10);if(g||e!=j){$(h[f]).height(e+"px")}}},sliderlazyload:function(){var u=this;var s=u._lazyslider;if(s==null){return}var p=s.list;if(s.count>=p.length){return}var F=new Date();var o=u.$.height();var g=u.$.scrollTop();for(var y=0,z=p.length;y<z;y++){if(p[y].created){continue}var k=$(p[y].id);if(k.length==0){continue}var q=k.offset().top-o-200;if(parseInt(g)>=parseInt(q)){for(var x=y,A=u.hybridslider.length;x<A;x++){var c=u.hybridslider[x];var f=[];var C=c.floorid;var t=c.no;if(p[y].id.indexOf(C+"_"+t)<0){continue}u._lazyslider.count++;p[y].created=true;var E=c.sliderlist;for(var w=1,B=E.length;w<B;w++){var h=E[w];f.push('<li  data-ul-child="child"  class="slide-li"  ><a class="J_ping" report-eventlevel="1" report-eventid="MHome_BFloor" report-eventparam="'+h.sourceValue+'" page_name="index" href="'+h.url+'" ><img   src="'+h.img+'"  /></a></li>')}f=f.join("");var n=$("#slider_"+C+"_"+t+"_touch");n.append(f);var r=n.children("li").first().height()+"px";n.css({"min-height":r,overflow:"hidden"});var v=slide("#slider_"+C+"_"+t);try{v.init({loop:true,_floorid:C,smallBtn:true,autoPlay:true,autoHeight:true,playTime:3000,callback:function(e){l(u,this._floorid,e)}});u.slider.push(v)}catch(D){u.log(p[y].id+" error!",D)}}}}function l(m,j,i){if(!!m.searchLand.openSearchLoad){return}if(!!!m.ishttpinvoke){return}i--;if(m._hybridslider==null||m._hybridslider[j]==null){return}var e=m._hybridslider[j];if(!m.inviewport("#slider_"+e.floorid+"_"+e.no)){return}var G=e.sliderlist;if(G==null||G[i]==null||G[i].exposalUrl==null||G[i].exposalUrl==""||!!G[i].hasexposal){return}G[i].hasexposal=true;m.imgHttp(G[i].exposalUrl)}},inviewport:function(g){if(g==null||$(g)==null){return false}var e=this;var f=e.$.scrollTop();var c=$(g).offset().top;if(!!!e.$h){e.$h=e.$.height()}return c>=f&&c<=(f+e.$h)},imgHttp:function(c){if(c==null||c==""){return}var f=this;var g=new Image(1,1);var e=c.indexOf("?")>-1?(c+"&_="+new Date().getTime()):(c+"?_="+new Date().getTime());g.src=e},scrollFunction:function(){var p=this;var h,o,r,s,v,z,x,q,t,y,A,g,i;var l=1;var e={};p.under=1;q=0,t=0.85;$(document).ready(function(){h=$($("#index_search_head").children()[0]);o=$("#index_search_main");r=$("#fixedtop");s=$("#topheader");A=$("#"+p.appBannerID+"");var f=$("#slider");v=h.height();z=f.height()-v;i=A.height();p.$h=p.$.height();p.searchbarrgb=h.css("opacity")});p.$.on("load",function(){z=z<0?($("#slider").height()-v):z;y=$(window).scrollTop()<=z?0:1;setTimeout(function(){var D=$(window).scrollTop();y=1;k(D);if(D>0){p.imgLazyLad.lazyLad()}},0);var B=$(window).scrollTop();if(navigator.userAgent.indexOf("baidubrowser")>0&&navigator.userAgent.indexOf("Android")>0&&B>0){window.scrollTo(0,B+1)}var f=3;var C=setInterval(function(){if(p.hasAppBanner&&(A!=null&&(A.css("display")=="none"||A.height()==0))&&(s.css("display")=="block")){s.css("display","none");p.beenshield=true}if(--f==0){clearInterval(C)}},200);setTimeout(function(){if(p.$.scrollTop()>200||$("#scwrapper").height()<=p.$.height()){p.recommendRender()}},100)});function k(B){if(!!!p.hasActivityImg){h.css("opacity",0.85);return}var f=B;if(f<=z){h.css("opacity",f<v?q:t*((f-v)/z));y=1}else{if(y==1){h.css("opacity",t);y=0}}}var u=null;var n=0;if(p.seclayout){u=p.seclayout.urlobj.offset();n=u.height+u.top}p.$.on("touchstart",function(f){w=false;j=false;var B=f.touches[0];e.starty=B.clientY;e.startx=B.clientX;e.inity=e.starty;e.scrolly=0;e.lastdate=Date.now();e.lastY=0;e.secondzone=f.touches[0].pageY<=n});p.$.on("touchmove",function(D){var F=D.touches[0];var B=F.clientY;var C=F.clientX;var f=p.$.scrollTop();if(f<0){return}e.diry=B-e.starty;e.dirx=C-e.startx;if(Math.abs(e.diry)<=Math.abs(e.dirx)){direct=0;return}var E=B-e.starty;if(E*e.lastgap<0){e.inity=B}e.scrolly=B-e.inity;if(e.diry<0){k(f+Math.abs(e.scrolly))}else{k(f-Math.abs(e.scrolly))}e.starty=B;e.startx=C;e.lastgap=E});$(window).on("touchend",function(f){if(e.secondzone){if(e.diry<0&&p.$.scrollTop()>=0){setTimeout(function(){if(!p.beenshield&&i!=null&&i!=0){s.css("display","none");r.removeClass("showfixedtop").addClass("showfixedtop-half")}},50)}}else{}});var w=false,c=0,j=false,m=new Date();p.$.scroll(function(D){var B=p.$;var f=B.scrollTop();if(f<0){return}var C=A?A.height():50;if(!p.beenshield&&C!=null&&C!=0){if(f==0){if(!j){r.removeClass("showfixedtop-half").addClass("showfixedtop");s.css("display","block");p.under=1;j=true}}else{s.css("display","none");r.removeClass("showfixedtop").addClass("showfixedtop-half");l=1}}if(!!!p.hasActivityImg){h.css("opacity",0.85)}else{if(f<=z){h.css("opacity",f<v?q:t*((f-v)/z));c=0}else{if(c==0){h.css("opacity",t);c=1}}}if(f>=p.$h){$("#"+p.runtopId).show()}else{$("#"+p.runtopId).hide()}if(p.recommendOpen){if(p.recommendCanLoad&&f>=p.recommendloadHeight){p.recommendLoadData()}}p.imgLazyLad.lazyLad();if(!!!p.searchLand.openSearchLoad){p.indexloc=f}else{s.css("display","none")}p.sliderlazyload()})},seckillImgScroll:function(){if(!this.seclayout){return}var e=this.seclayout;var f=this.newseckillurl;if(e.seclist.length<=3){return}var c=new (M.exports("touchHandlerX").clazz)({target:e.urlobj[0],noscroll:false,basegap:e.gapwidth,other:this.slider});c.touchEndfn(function(g){if(g<0){window.location.href=f}});e.touchobj=c;c.run();c.fixetRootWidth(e.urlwidth-e.container.width())},run:function(){var f=this;f.navigatorRender(0);if(f.hasAppBanner){try{f.appBannerBind()}catch(g){try{$("#"+f.appBannerID+"").remove();$("#topheader").css("display","none")}catch(g){}f.log("Appbanner error!",g)}}f.sliderHTML();if(f.sliderImgList&&f.sliderImgList.length>1){f.hasActivityImg=true;var c=slide("#slider");try{c.init({loop:true,smallBtn:true,autoPlay:true,autoHeight:true,playTime:3000,callback:function(e){(function h(k,j){if(!!k.searchLand.openSearchLoad){return}j--;if(!!!k.ishttpinvoke){return}if(k._sliderImgList==null||k._sliderImgList[j]==null){return}var i=k._sliderImgList[j];if(!k.inviewport("#slider")){return}if(i==null||i.exposalUrl==null||i.exposalUrl==""||!!i.hasexposal){return}i.hasexposal=true;k.imgHttp(i.exposalUrl)})(f,e)}})}catch(g){$("#slider_touch").css("overflow","hidden");f.log("slider error!",g)}f.slider.push(c)}if(f.endTime){f.seckillRender()}f.resizeFunction();f.seckillImgScroll();f.scrollFunction();f.recordIndexLoc();f.toTopBind();f.searchhandler();f.thread.start();f.imgLazyLad.lazyLad();f.sliderlazyload();f.floatLayerRender()},log:function(c,f){console.log("Opps!Something Wrong!Please notice it!--"+c)}});a.clazz=b});M.define("touchHandlerX",function(b){var a=function(e){this.init(e)};M.object.merge(a.prototype,{init:function(e){c.target=null;c.noscroll=false;c.direct=0;c.basegap=0;c.endfn=function(){};c.movefn=function(){};c.startfn=function(){};c.prefix="-webkit-";if(e!=null&&M.object.isObject(e)){M.object.merge(c,e)}},getX:function(g){var f=this;if(!!!g){g=f.tar}var e=$(g).css("transform");if(!e){e=$(g).css("-webkit-transform")}if(e=="none"){e=0}else{e=e.replace("translate3d(","").replace(",0px,0px)","");e=parseFloat(e,10)}if(!e){e=0}return e},goToEnd:function(h,g,l,i){var e=this;var f=null;var m=null;var k=h<0?h:0;var j=h<0?(-l):0;f={transform:"translate3d("+k+"px,0px,0px)",transition:"0.3s ease 0s"};m={transform:"translate3d("+j+"px,0px,0px)"};if(h!=0){e.css($(g),f);setTimeout(function(){e.css($(g),m);if(i){i(j)}},200);return true}},css:function(h,j){var g=c.prefix;var f={};for(var e in j){if(typeof(e)=="string"){f[g+e]=j[e];f[e]=j[e]}}h.css(f)},fixetRootWidth:function(e){this.rootWidth=e;this.screenWidth=$(this.tar).parent().width();this.bannerWidth=this.rootWidth+this.screenWidth},getAnimationobj:function(l){var k=l<0?-1:1;l=Math.abs(l);var i=[],h=0,e=1;var f=this.screenWidth;var j=this.basegap*k;f=[j,j*2];if(!!this.shortmove){return[j,e*0.5]}if(l>0&&l<=f[0]){i.push(j);i.push(e*0.5)}else{if(l>f[0]&&l<=f[1]){i.push(j*2);i.push(e*0.5)}else{if(l>f[1]){i.push(j*3);i.push(e*0.6)}}}return i},animateX:function(e,f){var g={transform:"translate3d("+e+"px,0px,0px)",transition:"-webkit-transform "+f+"s cubic-bezier(0.333333, 0.666667, 0.666667, 1)"};this.css($(this.tar),g)},gotoX:function(g,e){var f=this;if(!!!g){g=this.tar}f.css($(g),{transform:"translate3d("+e+"px,0px,0px)"})},getObj:function(){return this.tar},run:function(){var m=this;var l=c.target;var f=$(l);m.tar=l;m.basegap=c.basegap;var j=null;var n={};var g=0;m.screenWidth=f.parent().width();m.rootWidth=$(l).width()-m.screenWidth;rootWidth=m.rootWidth;var e=[];var k=function(u){if(c.other){for(var s=0,y=c.other.length;s<y;s++){c.other[s].play()}}var q=false;var B=Date.now();if(B-n.lastdate>=1){q=true}if(j==1){j=0;return}var r=u.changedTouches[0];var t=r.clientX;var A=n.initx+t-n.startx;if(A>0||A<(-1*m.rootWidth)){var x=null;if(n.initx-n.startx<-m.rootWidth){x=c.endfn}e.push(setTimeout(function(){m.goToEnd(A,l,m.rootWidth,x)},50));return}var z=t-n.startx;m.shortmove=(z<=m.basegap&&z>=-m.basegap)?true:false;if(q){m.shortmove=true}var w=m.getAnimationobj(z);var v=(m.shortmove&&w[0]>0)?0:w[0];var p=A-(A%m.basegap)+v;if(p>0||p<(-1*m.rootWidth)){var x=null;if(n.initx-n.startx<-m.rootWidth){x=c.endfn}setTimeout(function(){m.goToEnd(p,l,m.rootWidth,x)},50);return}var o=setTimeout(function(){m.animateX(p,w[1])},0);e.push(o);n.lastmovesX=p};f.off("touchend",k);f.on("touchend",k);var i=function(r){var t=r.targetTouches[0];var p=t.pageY;var q=t.pageX;n.diry=p-n.starty;n.dirx=q-n.startx;if(Math.abs(n.dirx)<Math.abs(n.diry)){j=1}else{var o=Date.now();n.lastdate=o;var s=n.initx+q-n.startx;s=s>0?0:s;m.gotoX(f,s);m.preventDefault()}};f.off("touchmove",i);f.on("touchmove",i);var h=function(q){if(c.other){for(var p=0,o=c.other.length;p<o;p++){c.other[p].pause()}}$(l).css("transition","");$(l).css("-webkit-transition","");for(var p=0,o=e.length;p<o;p++){clearTimeout(e[p])}var r=q.targetTouches[0];n.starty=r.pageY;n.startx=r.pageX;n.initx=m.getX(l);n.scrollx=0;n.lastX=0;n.lastdate=0;if(!!!n.lastmovesX){n.lastmovesX=0}};f.off("touchstart",h);f.on("touchstart",h)},preventDefault:function(f){if(f&&ev.preventDefault){f.preventDefault()}else{window.event.returnValue=false}return false},touchEndfn:function(e){c.endfn=M.object.isFunction(e)?e:null},touchMovefn:function(e){c.movefn=M.object.isFunction(e)?e:null},touchStartfn:function(e){c.startfn=M.object.isFunction(e)?e:null},touchfn:function(e){if(M.object.isObject(e)){M.object.merge(c,e)}}});var c=a;b.clazz=a});var ceshi=0;function debug(a){document.getElementById("index_newkeyword").value=a};